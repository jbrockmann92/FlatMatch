@model FlatMatchApp.Models.LeaseholderViewModel

@{
    ViewData["Title"] = "Details";
    Layout = "~/Views/Shared/_RenterLayout.cshtml";
}
<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Details</title>
</head>
<body>
    @* This is the chat box, let me know if you need to make changes or where you would like to place it, the scripts necessary for this are located at the bottom of the body *@
    <div class="container">
        <div class="row">&nbsp;</div>
        <div class="row">
            
            <div class="col-4"><input type="hidden" id="userInput" value="@User.Identity.Name" /></div>
            <br />
        </div>
        <div class="row">
            <div class="col-2">Message</div>
            <div class="col-4"><input type="text" id="messageInput" /></div>
        </div>
        <div class="row">&nbsp;</div>
        <div class="row">
            <div class="col-6">
                <input type="button" id="sendButton" value="Send Message" />
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-12">
            <hr />
        </div>
    </div>
    <div class="row">
        <div class="col-6">
            <ul id="messagesList"></ul>
        </div>
    </div>
    <br />
    <h1>Details</h1>

    <div>
        <h4>Leaseholder</h4>
        <div class="card-img"><img src="@Html.DisplayFor(model => model.Leaseholder.ProfileUrl)" /></div>
        <div class="card-footer">
            <dl>
                <dt class="col-sm-2">
                    @Html.DisplayNameFor(model => model.Leaseholder.FirstName)
                </dt>
                <dd class="col-sm-10">
                    @Html.DisplayFor(model => model.Leaseholder.FirstName)
                </dd>
                <dt class="col-sm-2">
                    @Html.DisplayNameFor(model => model.Leaseholder.LastName)
                </dt>
                <dd class="col-sm-10">
                    @Html.DisplayFor(model => model.Leaseholder.LastName)
                </dd>
            </dl>
        </div>
        < class="row">
        <dd>

        </dd>

        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Leaseholder.Property.Type)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Leaseholder.Property.Type)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Leaseholder.Property.Address.City)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Leaseholder.Property.Address.City)
        </dd>

        <div class="table-bordered">
            <dd class=" col-sm-10">
                @Html.DisplayFor(model => model.Leaseholder.Property.Activities)
            </dd>
            <dd class=" col-sm-10">
                @Html.DisplayFor(model => model.Leaseholder.Property.Address)
            </dd>
            <dd class=" col-sm-10">
                @Html.DisplayFor(model => model.Leaseholder.Property.NumberBedrooms)
            </dd>
            <dd class=" col-sm-10">
                @Html.DisplayFor(model => model.Leaseholder.Property.SquareFootage)
            </dd>
            <dd class=" col-sm-10">
                @Html.DisplayFor(model => model.Leaseholder.Property.Price)
            </dd>
            <dd class=" col-sm-10">
                @Html.DisplayFor(model => model.Leaseholder.Property.isAvailable)
            </dd>
        </div>

        <div class=" col-sm-10">
            @foreach (var item in Model.UserPreferences)
            {
                <div class="table-">
                    @Html.DisplayFor(modelItem => item.PreferenceName.Name)
                </div>
                <div class="table">
                    @Html.DisplayFor(modelItem => item.Value)
                </div>
            }

        </div>

    </div>

    <div>
        <a asp-action="Edit" asp-route-id="@Model.Leaseholder.Id" class="btn btn-danger">Edit</a> |
        <a asp-action="Index">Back to List</a>
    </div>

    <div>
        <div style="margin-top: 20px; margin-bottom: 20px; color: black">
            Click <button class="btn btn-dark" onclick="recommendations()">Here</button> if you'd like to see some recommendations about how to improve your profile
        </div>
        <div style="border-color: black; border-width: 4px; color: red; margin-bottom: 10px">
            <hr />
            <div id="Photos">
            </div>
            <div id="Description">
            </div>
            <div id="Price">
            </div>
            <div id="Random">
            </div>
        </div>

        <script type="text/javascript">
            function recommendations() {
                //Change to check image brightness and tell them images need to be brighter if necessary
                if (@Model.Value[Model.Value.Count -1] < 15) {
                                    document.getElementById("Photos").innerHTML = "+ Looks like at least one of your photos is pretty dark. Make sure there's enough light!";
                }

                //Description length of words or even letters < 300 or something
                document.getElementById("Description").innerHTML = "+ We'd recommend adding more on the description section. People like to know what they're getting into."

                var price = @Model.Leaseholder.Property.Price;
                var footage = @Model.Leaseholder.Property.SquareFootage;
                if ((price / footage) > 1) {
                    document.getElementById("Price").innerHTML = "+ Your price is pretty high for the size of the property. You might want to think about lowering it to attract more renters."
                }
                //Would be cool to check image quality and brightness
                //Would be cool to check price against other properties around
                var items = @Model;
                items.name.forEach(e => checkNull(e));
                //Probably won't work. Interesting if it does though

                function checkNull(item) {
                    if (item === null) {
                        document.getElementById("Random").innerHTML = "+ We'd recommend adding something for " + item.name;
                        //Probably need to re-work
                    }
                }
                //Nice because it limits to four recommendations, not to overwhelm, but will update with new rec if they fix one
            }
        </script>
    </div>
    <script src="~/js/signalr/dist/browser/signalr.js"></script>
    <script src="~/js/chat.js"></script>
</body>
</html>

